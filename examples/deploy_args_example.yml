Type: Deployment
ApiVersion: v0.6

Namespace: global

Args:
  - Name: domain
    Type: String

Resources:
  - Name: ${{ Args.domain }}
    Kind: ProxyRule
    Version: v0.4
    Config:
      Watch:
        - get-started.global
      Rules:
        - Domain: ${{ Args.domain }}
          Network: Public
          Locations:
            - Path: /
              Target:
                CargoKey: get-started.global
                CargoPort: 9000

# See all options:
# https://docs.next-hat.com/references/nanocl/daemon/v0.6#tag/Cargoes/operation/create_cargo
Cargoes:
  - Name: get-started
    Container:
      Image: nexthat/nanocl-get-started:latest
      HostConfig:
        Binds:
          - ./test_local:/test
      Env:
        - TEST=GG
        - APP=GET_STARTED
