Type: Deployment
ApiVersion: v0.2

Namespace: global

Resources:
  - Name: deploy-example.com
    Kind: ProxyRule
    Config:
      Watch:
        - get-started@global
      Http:
        Domain: deploy-example.com
        Network: Public
        Locations:
          - Path: /
            Target:
              Key: get-started@global
              Port: 9000

Cargoes:
  - Name: deploy-example
    # See all options:
    # https://docs.docker.com/engine/api/v1.42/#tag/Container/operation/ContainerCreate
    Container:
      Image: nexthat/nanocl-get-started:latest
      HostConfig:
        Binds: [
          "./test_local:/test"
        ]
      Env:
        - TEST=GG
        - APP=GET_STARTED
  - Name: deploy-example2
    # See all options:
    # https://docs.docker.com/engine/api/v1.42/#tag/Container/operation/ContainerCreate
    Container:
      Image: nexthat/nanocl-get-started:latest
      HostConfig:
        Binds: [
          "./test_local:/test"
        ]
      Env:
        - TEST=GG
        - APP=GET_STARTED
