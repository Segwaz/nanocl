Type: Deployment
ApiVersion: v0.4

Namespace: system

Cargoes:
- Name: proxy
  Container:
    Image: ghcr.io/nxthat/nanocl-proxy:0.2.4
    HostConfig:
      NetworkMode: host
      Binds:
      - /var/lib/nanocl/proxy/letsencrypt:/etc/letsencrypt
      - /var/lib/nanocl/proxy/conf.d:/etc/nginx/conf.d
      - /var/lib/nanocl/proxy/html:/usr/share/nginx/html
      - /var/lib/nanocl/proxy/sites-enabled:/etc/nginx/sites-enabled
      - /var/lib/nanocl/proxy/streams-enabled:/etc/nginx/streams-enabled

- Name: ctrlproxy
  Container:
    Image: ghcr.io/nxthat/nanocl-ctrl-proxy:0.2.4
    HostConfig:
      NetworkMode: system
      Binds:
      - /var/lib/nanocl/proxy/conf.d:/etc/nginx/conf.d
      - /var/lib/nanocl/proxy/sites-enabled:/etc/nginx/sites-enabled
      - /var/lib/nanocl/proxy/streams-enabled:/etc/nginx/streams-enabled
      - /run/nanocl:/run/nanocl
